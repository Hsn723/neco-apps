apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - common/clusterrole.yaml
  - common/resources.yaml
  - common/psp.yaml
  - ceph-hdd
  - ceph-ssd

  # for i in psp clusterrole resources; do
  #   helm template upstream/chart -f values.yaml -x templates/${i}.yaml > common/${i}.yaml
  # done


  # for t in hdd ssd; do
  #   for i in serviceaccount role rolebinding deployment; do
  #     helm template upstream/chart -f values.yaml -x templates/${i}.yaml --namespace ceph-${t} > ceph-${t}/${i}.yaml
  #   done
  #   helm template upstream/chart -f values.yaml -x templates/clusterrolebinding.yaml --namespace ceph-${t} > ceph-${t}/clusterrolebinding/clusterrolebinding.yaml
  # done


  # helm template upstream/chart -f values.yaml -x templates/psp.yaml > common/psp.yaml
# helm template upstream/chart -f values.yaml -x templates/clusterrole.yaml > common/clusterrole.yaml
# helm template upstream/chart -f values.yaml -x templates/resources.yaml > common/crd.yaml

# helm template upstream/chart -f values.yaml -x templates/serviceaccount.yaml --namespace ceph-hdd > ceph-hdd/serviceaccount.yaml
# helm template upstream/chart -f values.yaml -x templates/role.yaml --namespace ceph-hdd > ceph-hdd/role.yaml
# helm template upstream/chart -f values.yaml -x templates/rolebinding.yaml --namespace ceph-hdd > ceph-hdd/rolebinding.yaml
# helm template upstream/chart -f values.yaml -x templates/clusterrolebinding.yaml --namespace ceph-hdd > ceph-hdd/clusterrolebinding/clusterrolebinding.yaml
# helm template upstream/chart -f values.yaml -x templates/deployment.yaml --namespace ceph-hdd > ceph-hdd/deployment.yaml
