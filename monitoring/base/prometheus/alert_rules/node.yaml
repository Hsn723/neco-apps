groups:
  - name: node
    rules:
      - alert: NodeExporterDown
        annotations:
          summary: NodeExporter has disappeared from Prometheus target discovery.
          runbook: TBD
        expr: |
          absent(up{job="node-exporter"} == 1)
        for: 15m
        labels:
          severity: critical
      - alert: MonitorHWDown
        expr: |
          absent(up{job="metallb"} == 1)
        labels:
          severity: critical
        for: 10m
        annotations:
          summary: MonitorHW has disappeared from Prometheus target discovery.
          runbook: Please consider to find root causes, and solve the problems
      - alert: ConntrackEntriesReachLimit
        expr: |
          (node_nf_conntrack_entries / node_nf_conntrack_entries_limit) * 100 > 75
        for: 1h
        labels:
          severity: critical
        annotations:
          summary: Conntrack entries will be reach limit.
          runbook: Please re-configure the limit or plan some solutions.
