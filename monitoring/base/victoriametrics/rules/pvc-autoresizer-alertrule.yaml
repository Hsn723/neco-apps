apiVersion: operator.victoriametrics.com/v1beta1
kind: VMRule
metadata:
  name: pvc-autoresizer
  namespace: monitoring
spec:
  groups:
  - name: pvc-autoresizer
    rules:
      - alert: PVCAutoresizerNotWorking
        expr: absent(rate(pvcautoresizer_loop_seconds_total[5m]) > 0)
        for: 30m
        labels:
          severity: critical
          category: storage
        annotations:
          summary: "pvc-autoresizer not working."
          runbook: Please check the log for pvc-autoresizer.
      - alert: PVCAutoresizerFailed
        expr: absent(rate(pvcautoresizer_failed_resize_total[5m]) == 0)
        labels:
          severity: warning
          category: storage
        for: 15m
        annotations:
          summary: "pvc-autoresizer failed."
          runbook: Please check the log for pvc-autoresizer and check connectivity for the api server.
