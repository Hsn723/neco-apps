apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - contour/upstream/02-rbac.yaml
  - contour/upstream/02-service-contour.yaml
  - contour/rbac_contour-plus.yaml
  - contour/service.yaml
  - contour/upstream/03-contour.yaml
  - contour/upstream/03-envoy.yaml
patches:
  - contour/rbac_contour.yaml
  - contour/deployment_contour.yaml
  - contour/deployment_envoy.yaml
  - contour/service_contour.yaml
patchesJson6902:
  - target:
      group: rbac.authorization.k8s.io
      version: v1beta1
      kind: Role
      name: contour-leaderelection
      namespace: projectcontour
    path: contour/patch_replace-ns.yaml
  - target:
      group: rbac.authorization.k8s.io
      version: v1beta1
      kind: RoleBinding
      name: contour-leaderelection
      namespace: projectcontour
    path: contour/patch_replace-ns.yaml
  - target:
      version: v1
      kind: Service
      name: contour
      namespace: projectcontour
    path: contour/patch_replace-ns.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: contour
      namespace: projectcontour
    path: contour/patch_deployment_contour.yaml
  - target:
      group: apps
      version: v1
      kind: DaemonSet
      name: envoy
      namespace: projectcontour
    path: contour/patch_deployment_envoy.yaml
